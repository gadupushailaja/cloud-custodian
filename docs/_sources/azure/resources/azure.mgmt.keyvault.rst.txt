azure.azure.mgmt.keyvault resources
###################################




.. _azure.keyvault:

azure.keyvault
==============



Filters
-------


  - :ref:`diagnostic-settings <azure.common.filters.diagnostic-settings>`
  
  - :ref:`event <azure.common.filters.event>`
  
  - :ref:`firewall-rules <azure.common.filters.firewall-rules>`
  
  - :ref:`marked-for-op <azure.common.filters.marked-for-op>`
  
  - :ref:`metric <azure.common.filters.metric>`
  
  - :ref:`policy-compliant <azure.common.filters.policy-compliant>`
  
  - :ref:`value <azure.common.filters.value>`
  
  - :ref:`whitelist <azure.keyvault.filters.whitelist>`



.. _azure.keyvault.filters.whitelist:

whitelist
+++++++++


.. container:: toggle

  .. container:: header

    Schema:

  .. code-block:: yaml

    properties:
      key:
        type: string
      permissions:
        certificates:
          type: array
        keys:
          type: array
        secrets:
          type: array
      type:
        enum:
        - whitelist
      users:
        type: array
    required:
    - key
    - type




Actions
-------


  - :ref:`auto-tag-user <azure.common.actions.auto-tag-user>`
  
  - :ref:`delete <azure.common.actions.delete>`
  
  - :ref:`logic-app <azure.common.actions.logic-app>`
  
  - :ref:`mark-for-op <azure.common.actions.mark-for-op>`
  
  - :ref:`notify <azure.common.actions.notify>`
  
  - :ref:`tag <azure.common.actions.tag>`
  
  - :ref:`tag-trim <azure.common.actions.tag-trim>`
  
  - :ref:`untag <azure.common.actions.untag>`
  
  - :ref:`update-access-policy <azure.keyvault.actions.update-access-policy>`

  - :ref:`webhook <azure.common.actions.webhook>`
  



.. _azure.keyvault.actions.update-access-policy:

update-access-policy
++++++++++++++++++++
Adds Get and List key access policy to all keyvaults

    .. code-block:: yaml

      policies:
        - name: azure-keyvault-update-access-policies
          resource: azure.keyvault
          description: |
            Add key get and list to all keyvault access policies
          actions:
           - type: update-access-policy
             operation: add
             access-policies:
              - tenant-id: 00000000-0000-0000-0000-000000000000
                object-id: 11111111-1111-1111-1111-111111111111
                permissions:
                  keys:
                    - Get
                    - List

.. container:: toggle

  .. container:: header

    Schema:

  .. code-block:: yaml

    properties:
      access-policies:
        items:
          object-id:
            type: string
          permissions:
            certificates:
              items:
                type: string
              type: array
            keys:
              items:
                type: string
              type: array
            secrets:
              items:
                type: string
              type: array
            type: object
          tenant-id:
            type: string
          type: object
        type: array
      operation:
        enum:
        - add
        - replace
        type: string
      type:
        enum:
        - update-access-policy
    required:
    - operation
    - access-policies
    - type


